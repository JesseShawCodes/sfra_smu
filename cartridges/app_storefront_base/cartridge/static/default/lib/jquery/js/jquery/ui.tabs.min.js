!function(e){e.widget("ui.tabs",{_init:function(){void 0!==this.options.deselectable&&(this.options.collapsible=this.options.deselectable),this._tabify(!0)},_setData:function(e,t){if("selected"==e){if(this.options.collapsible&&t==this.options.selected)return;this.select(t)}else this.options[e]=t,"deselectable"==e&&(this.options.collapsible=t),this._tabify()},_tabId:function(t){return t.title&&t.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+e.data(t)},_sanitizeSelector:function(e){return e.replace(/:/g,"\\:")},_cookie:function(){var t=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+e.data(this.list[0]));return e.cookie.apply(null,[t].concat(e.makeArray(arguments)))},_ui:function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var t=e(this);t.html(t.data("label.tabs")).removeData("label.tabs")})},_tabify:function(t){function s(t,s){t.css({display:""}),e.browser.msie&&s.opacity&&t[0].style.removeAttribute("filter")}this.list=this.element.children("ul:first"),this.lis=e("li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return e("a",this)[0]}),this.panels=e([]);var i=this,a=this.options,l=/^#.+/;this.anchors.each(function(t,s){var n,o=e(s).attr("href"),r=o.split("#")[0];if(r&&(r===location.toString().split("#")[0]||(n=e("base")[0])&&r===n.href)&&(o=s.hash,s.href=o),l.test(o))i.panels=i.panels.add(i._sanitizeSelector(o));else if("#"!=o){e.data(s,"href.tabs",o),e.data(s,"load.tabs",o.replace(/#.*$/,""));var h=i._tabId(s);s.href="#"+h;var c=e("#"+h);c.length||(c=e(a.panelTemplate).attr("id",h).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(i.panels[t-1]||i.list),c.data("destroy.tabs",!0)),i.panels=i.panels.add(c)}else a.disabled.push(t)}),t?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),void 0===a.selected?(location.hash&&this.anchors.each(function(e,t){return t.hash==location.hash?(a.selected=e,!1):void 0}),"number"!=typeof a.selected&&a.cookie&&(a.selected=parseInt(i._cookie(),10)),"number"!=typeof a.selected&&this.lis.filter(".ui-tabs-selected").length&&(a.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),a.selected=a.selected||0):null===a.selected&&(a.selected=-1),a.selected=a.selected>=0&&this.anchors[a.selected]||a.selected<0?a.selected:0,a.disabled=e.unique(a.disabled.concat(e.map(this.lis.filter(".ui-state-disabled"),function(e){return i.lis.index(e)}))).sort(),-1!=e.inArray(a.selected,a.disabled)&&a.disabled.splice(e.inArray(a.selected,a.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),a.selected>=0&&this.anchors.length&&(this.panels.eq(a.selected).removeClass("ui-tabs-hide"),this.lis.eq(a.selected).addClass("ui-tabs-selected ui-state-active"),i.element.queue("tabs",function(){i._trigger("show",null,i._ui(i.anchors[a.selected],i.panels[a.selected]))}),this.load(a.selected)),e(window).bind("unload",function(){i.lis.add(i.anchors).unbind(".tabs"),i.lis=i.anchors=i.panels=null})):a.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[a.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),a.cookie&&this._cookie(a.selected,a.cookie);for(var n,o=0;n=this.lis[o];o++)e(n)[-1==e.inArray(o,a.disabled)||e(n).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(a.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!=a.event){var r=function(e,t){t.is(":not(.ui-state-disabled)")&&t.addClass("ui-state-"+e)},h=function(e,t){t.removeClass("ui-state-"+e)};this.lis.bind("mouseover.tabs",function(){r("hover",e(this))}),this.lis.bind("mouseout.tabs",function(){h("hover",e(this))}),this.anchors.bind("focus.tabs",function(){r("focus",e(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){h("focus",e(this).closest("li"))})}var c,d;a.fx&&(e.isArray(a.fx)?(c=a.fx[0],d=a.fx[1]):c=d=a.fx);var u=d?function(t,a){e(t).closest("li").removeClass("ui-state-default").addClass("ui-tabs-selected ui-state-active"),a.hide().removeClass("ui-tabs-hide").animate(d,d.duration||"normal",function(){s(a,d),i._trigger("show",null,i._ui(t,a[0]))})}:function(t,s){e(t).closest("li").removeClass("ui-state-default").addClass("ui-tabs-selected ui-state-active"),s.removeClass("ui-tabs-hide"),i._trigger("show",null,i._ui(t,s[0]))},b=c?function(e,t){t.animate(c,c.duration||"normal",function(){i.lis.removeClass("ui-tabs-selected ui-state-active").addClass("ui-state-default"),t.addClass("ui-tabs-hide"),s(t,c),i.element.dequeue("tabs")})}:function(e,t){i.lis.removeClass("ui-tabs-selected ui-state-active").addClass("ui-state-default"),t.addClass("ui-tabs-hide"),i.element.dequeue("tabs")};this.anchors.bind(a.event+".tabs",function(){var t=this,s=e(this).closest("li"),l=i.panels.filter(":not(.ui-tabs-hide)"),n=e(i._sanitizeSelector(this.hash));if(s.hasClass("ui-tabs-selected")&&!a.collapsible||s.hasClass("ui-state-disabled")||s.hasClass("ui-state-processing")||i._trigger("select",null,i._ui(this,n[0]))===!1)return this.blur(),!1;if(a.selected=i.anchors.index(this),i.abort(),a.collapsible){if(s.hasClass("ui-tabs-selected"))return a.selected=-1,a.cookie&&i._cookie(a.selected,a.cookie),i.element.queue("tabs",function(){b(t,l)}).dequeue("tabs"),this.blur(),!1;if(!l.length)return a.cookie&&i._cookie(a.selected,a.cookie),i.element.queue("tabs",function(){u(t,n)}),i.load(i.anchors.index(this)),this.blur(),!1}if(a.cookie&&i._cookie(a.selected,a.cookie),!n.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";l.length&&i.element.queue("tabs",function(){b(t,l)}),i.element.queue("tabs",function(){u(t,n)}),i.load(i.anchors.index(this)),e.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},destroy:function(){var t=this.options;this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var t=e.data(this,"href.tabs");t&&(this.href=t);var s=e(this).unbind(".tabs");e.each(["href","load","cache"],function(e,t){s.removeData(t+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){e.data(this,"destroy.tabs")?e(this).remove():e(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),t.cookie&&this._cookie(null,t.cookie)},add:function(t,s,i){void 0===i&&(i=this.anchors.length);var a=this,l=this.options,n=e(l.tabTemplate.replace(/#\{href\}/g,t).replace(/#\{label\}/g,s)),o=t.indexOf("#")?this._tabId(e("a",n)[0]):t.replace("#","");n.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var r=e("#"+o);r.length||(r=e(l.panelTemplate).attr("id",o).data("destroy.tabs",!0)),r.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),i>=this.lis.length?(n.appendTo(this.list),r.appendTo(this.list[0].parentNode)):(n.insertBefore(this.lis[i]),r.insertBefore(this.panels[i])),l.disabled=e.map(l.disabled,function(e){return e>=i?++e:e}),this._tabify(),1==this.anchors.length&&(n.addClass("ui-tabs-selected ui-state-active"),r.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){a._trigger("show",null,a._ui(a.anchors[0],a.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[i],this.panels[i]))},remove:function(t){var s=this.options,i=this.lis.eq(t).remove(),a=this.panels.eq(t).remove();i.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(t+(t+1<this.anchors.length?1:-1)),s.disabled=e.map(e.grep(s.disabled,function(e){return e!=t}),function(e){return e>=t?--e:e}),this._tabify(),this._trigger("remove",null,this._ui(i.find("a")[0],a[0]))},enable:function(t){var s=this.options;-1!=e.inArray(t,s.disabled)&&(this.lis.eq(t).removeClass("ui-state-disabled"),s.disabled=e.grep(s.disabled,function(e){return e!=t}),this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t])))},disable:function(e){var t=this.options;e!=t.selected&&(this.lis.eq(e).addClass("ui-state-disabled"),t.disabled.push(e),t.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e])))},select:function(e){"string"==typeof e?e=this.anchors.index(this.anchors.filter("[href$="+e+"]")):null===e&&(e=-1),-1==e&&this.options.collapsible&&(e=this.options.selected),this.anchors.eq(e).trigger(this.options.event+".tabs")},load:function(t){var s=this,i=this.options,a=this.anchors.eq(t)[0],l=e.data(a,"load.tabs");if(this.abort(),!l||0!==this.element.queue("tabs").length&&e.data(a,"cache.tabs"))return void this.element.dequeue("tabs");if(this.lis.eq(t).addClass("ui-state-processing"),i.spinner){var n=e("span",a);n.data("label.tabs",n.html()).html(i.spinner)}this.xhr=e.ajax(e.extend({},i.ajaxOptions,{url:l,success:function(l,n){e(s._sanitizeSelector(a.hash)).html(l),s._cleanup(),i.cache&&e.data(a,"cache.tabs",!0),s._trigger("load",null,s._ui(s.anchors[t],s.panels[t]));try{i.ajaxOptions.success(l,n)}catch(o){}s.element.dequeue("tabs")}}))},abort:function(){this.element.queue([]),this.panels.stop(!1,!0),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup()},url:function(e,t){this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",t)},length:function(){return this.anchors.length}}),e.extend(e.ui.tabs,{version:"1.7",getter:"length",defaults:{ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disabled:[],event:"click",fx:null,idPrefix:"ui-tabs-",panelTemplate:"<div></div>",spinner:"<em>Loading&#8230;</em>",tabTemplate:'<li><a href="#{href}"><span>#{label}</span></a></li>'}}),e.extend(e.ui.tabs.prototype,{rotation:null,rotate:function(e,s){var i=this,a=this.options,l=i._rotate||(i._rotate=function(t){clearTimeout(i.rotation),i.rotation=setTimeout(function(){var e=a.selected;i.select(++e<i.anchors.length?e:0)},e),t&&t.stopPropagation()}),n=i._unrotate||(i._unrotate=s?function(){t=a.selected,l()}:function(e){e.clientX&&i.rotate(null)});e?(this.element.bind("tabsshow",l),this.anchors.bind(a.event+".tabs",n),l()):(clearTimeout(i.rotation),this.element.unbind("tabsshow",l),this.anchors.unbind(a.event+".tabs",n),delete this._rotate,delete this._unrotate)}})}(jQuery);