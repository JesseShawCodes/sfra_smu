!function(t){t.widget("ui.resizable",t.extend({},t.ui.mouse,{_init:function(){var e=this,i=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(/relative/.test(this.element.css("position"))&&t.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"}),this.element.wrap(t('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=i.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var s=this.handles.split(",");this.handles={};for(var h=0;h<s.length;h++){var o=t.trim(s[h]),n="ui-resizable-"+o,a=t('<div class="ui-resizable-handle '+n+'"></div>');/sw|se|ne|nw/.test(o)&&a.css({zIndex:++i.zIndex}),"se"==o&&a.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[o]=".ui-resizable-"+o,this.element.append(a)}}this._renderAxis=function(e){e=e||this.element;for(var i in this.handles){if(this.handles[i].constructor==String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var s=t(this.handles[i],this.element),h=0;h=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth();var o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");e.css(o,h),this._proportionallyResize()}t(this.handles[i]).length}},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!e.resizing){if(this.className)var t=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);e.axis=t&&t[1]?t[1]:"se"}}),i.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").hover(function(){t(this).removeClass("ui-resizable-autohide"),e._handles.show()},function(){e.resizing||(t(this).addClass("ui-resizable-autohide"),e._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var e=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){e(this.element);var i=this.element;i.parent().append(this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")})).end().remove()}this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement)},_mouseCapture:function(e){var i=!1;for(var s in this.handles)t(this.handles[s])[0]==e.target&&(i=!0);return this.options.disabled||!!i},_mouseStart:function(i){var s=this.options,h=this.element.position(),o=this.element;this.resizing=!0,this.documentScroll={top:t(document).scrollTop(),left:t(document).scrollLeft()},(o.is(".ui-draggable")||/absolute/.test(o.css("position")))&&o.css({position:"absolute",top:h.top,left:h.left}),t.browser.opera&&/relative/.test(o.css("position"))&&o.css({position:"relative",top:"auto",left:"auto"}),this._renderProxy();var n=e(this.helper.css("left")),a=e(this.helper.css("top"));s.containment&&(n+=t(s.containment).scrollLeft()||0,a+=t(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:a},this.size=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.originalPosition={left:n,top:a},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1;var r=t(".ui-resizable-"+this.axis).css("cursor");return t("body").css("cursor","auto"==r?this.axis+"-resize":r),o.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(e){var i=this.helper,s=(this.options,this.originalMousePosition),h=this.axis,o=e.pageX-s.left||0,n=e.pageY-s.top||0,a=this._change[h];if(!a)return!1;{var r=a.apply(this,[e,o,n]);t.browser.msie&&t.browser.version<7,this.sizeDiff}return(this._aspectRatio||e.shiftKey)&&(r=this._updateRatio(r,e)),r=this._respectSize(r,e),this._propagate("resize",e),i.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(r),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(e){this.resizing=!1;var i=this.options,s=this;if(this._helper){var h=this._proportionallyResizeElements,o=h.length&&/textarea/i.test(h[0].nodeName),n=o&&t.ui.hasScroll(h[0],"left")?0:s.sizeDiff.height,a=o?0:s.sizeDiff.width,r={width:s.size.width-a,height:s.size.height-n},l=parseInt(s.element.css("left"),10)+(s.position.left-s.originalPosition.left)||null,p=parseInt(s.element.css("top"),10)+(s.position.top-s.originalPosition.top)||null;i.animate||this.element.css(t.extend(r,{top:p,left:l})),s.helper.height(s.size.height),s.helper.width(s.size.width),this._helper&&!i.animate&&this._proportionallyResize()}return t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateCache:function(t){this.options;this.offset=this.helper.offset(),i(t.left)&&(this.position.left=t.left),i(t.top)&&(this.position.top=t.top),i(t.height)&&(this.size.height=t.height),i(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=(this.options,this.position),i=this.size,s=this.axis;return t.height?t.width=i.height*this.aspectRatio:t.width&&(t.height=i.width/this.aspectRatio),"sw"==s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"==s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t,e){var s=(this.helper,this.options),h=(this._aspectRatio||e.shiftKey,this.axis),o=i(t.width)&&s.maxWidth&&s.maxWidth<t.width,n=i(t.height)&&s.maxHeight&&s.maxHeight<t.height,a=i(t.width)&&s.minWidth&&s.minWidth>t.width,r=i(t.height)&&s.minHeight&&s.minHeight>t.height;a&&(t.width=s.minWidth),r&&(t.height=s.minHeight),o&&(t.width=s.maxWidth),n&&(t.height=s.maxHeight);var l=this.originalPosition.left+this.originalSize.width,p=this.position.top+this.size.height,d=/sw|nw|w/.test(h),g=/nw|ne|n/.test(h);a&&d&&(t.left=l-s.minWidth),o&&d&&(t.left=l-s.maxWidth),r&&g&&(t.top=p-s.minHeight),n&&g&&(t.top=p-s.maxHeight);var f=!t.width&&!t.height;return f&&!t.left&&t.top?t.top=null:f&&!t.top&&t.left&&(t.left=null),t},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var e=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++){var s=this._proportionallyResizeElements[i];if(!this.borderDif){var h=[s.css("borderTopWidth"),s.css("borderRightWidth"),s.css("borderBottomWidth"),s.css("borderLeftWidth")],o=[s.css("paddingTop"),s.css("paddingRight"),s.css("paddingBottom"),s.css("paddingLeft")];this.borderDif=t.map(h,function(t,e){var i=parseInt(t,10)||0,s=parseInt(o[e],10)||0;return i+s})}t.browser.msie&&(t(e).is(":hidden")||t(e).parents(":hidden").length)||s.css({height:e.height()-this.borderDif[0]-this.borderDif[2]||0,width:e.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var e=this.element,i=this.options;if(this.elementOffset=e.offset(),this._helper){this.helper=this.helper||t('<div style="overflow:hidden;"></div>');var s=t.browser.msie&&t.browser.version<7,h=s?1:0,o=s?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+o,height:this.element.outerHeight()+o,position:"absolute",left:this.elementOffset.left-h+"px",top:this.elementOffset.top-h+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=(this.options,this.originalSize),s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=(this.options,this.originalSize),h=this.originalPosition;return{top:h.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!=e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}})),t.extend(t.ui.resizable,{version:"1.7",eventPrefix:"resize",defaults:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,cancel:":input,option",containment:!1,delay:0,distance:1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("resizable"),i=e.options;_store=function(e){t(e).each(function(){t(this).data("resizable-alsoresize",{width:parseInt(t(this).width(),10),height:parseInt(t(this).height(),10),left:parseInt(t(this).css("left"),10),top:parseInt(t(this).css("top"),10)})})},"object"!=typeof i.alsoResize||i.alsoResize.parentNode?_store(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],_store(i.alsoResize)):t.each(i.alsoResize,function(t){_store(t)})},resize:function(){var e=t(this).data("resizable"),i=e.options,s=e.originalSize,h=e.originalPosition,o={height:e.size.height-s.height||0,width:e.size.width-s.width||0,top:e.position.top-h.top||0,left:e.position.left-h.left||0},n=function(i,s){t(i).each(function(){var i=t(this),h=t(this).data("resizable-alsoresize"),n={},a=s&&s.length?s:["width","height","top","left"];t.each(a||["width","height","top","left"],function(t,e){var i=(h[e]||0)+(o[e]||0);i&&i>=0&&(n[e]=i||null)}),/relative/.test(i.css("position"))&&t.browser.opera&&(e._revertToRelativePosition=!0,i.css({position:"absolute",top:"auto",left:"auto"})),i.css(n)})};"object"!=typeof i.alsoResize||i.alsoResize.nodeType?n(i.alsoResize):t.each(i.alsoResize,function(t,e){n(t,e)})},stop:function(){var e=t(this).data("resizable");e._revertToRelativePosition&&t.browser.opera&&(e._revertToRelativePosition=!1,el.css({position:"relative"})),t(this).removeData("resizable-alsoresize-start")}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("resizable"),s=i.options,h=i._proportionallyResizeElements,o=h.length&&/textarea/i.test(h[0].nodeName),n=o&&t.ui.hasScroll(h[0],"left")?0:i.sizeDiff.height,a=o?0:i.sizeDiff.width,r={width:i.size.width-a,height:i.size.height-n},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,p=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(r,p&&l?{top:p,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};h&&h.length&&t(h[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var i=t(this).data("resizable"),s=i.options,h=i.element,o=s.containment,n=o instanceof t?o.get(0):/parent/.test(o)?h.parent().get(0):o;if(n)if(i.containerElement=t(n),/document/.test(o)||o==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight};else{var a=t(n),r=[];t(["Top","Right","Left","Bottom"]).each(function(t,i){r[t]=e(a.css("padding"+i))}),i.containerOffset=a.offset(),i.containerPosition=a.position(),i.containerSize={height:a.innerHeight()-r[3],width:a.innerWidth()-r[1]};var l=i.containerOffset,p=i.containerSize.height,d=i.containerSize.width,g=t.ui.hasScroll(n,"left")?n.scrollWidth:d,f=t.ui.hasScroll(n)?n.scrollHeight:p;i.parentData={element:n,left:l.left,top:l.top,width:g,height:f}}},resize:function(e){var i=t(this).data("resizable"),s=i.options,h=(i.containerSize,i.containerOffset),o=(i.size,i.position),n=s._aspectRatio||e.shiftKey,a={top:0,left:0},r=i.containerElement;r[0]!=document&&/static/.test(r.css("position"))&&(a=h),o.left<(i._helper?h.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-h.left:i.position.left-a.left),n&&(i.size.height=i.size.width/s.aspectRatio),i.position.left=s.helper?h.left:0),o.top<(i._helper?h.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-h.top:i.position.top),n&&(i.size.width=i.size.height*s.aspectRatio),i.position.top=i._helper?h.top:0),i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top;var l=Math.abs((i._helper?i.offset.left-a.left:i.offset.left-a.left)+i.sizeDiff.width),p=Math.abs((i._helper?i.offset.top-a.top:i.offset.top-h.top)+i.sizeDiff.height),d=i.containerElement.get(0)==i.element.parent().get(0),g=/relative|absolute/.test(i.containerElement.css("position"));d&&g&&(l-=i.parentData.left),l+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-l,n&&(i.size.height=i.size.width/s.aspectRatio)),p+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-p,n&&(i.size.width=i.size.height*s.aspectRatio))},stop:function(){var e=t(this).data("resizable"),i=e.options,s=(e.position,e.containerOffset),h=e.containerPosition,o=e.containerElement,n=t(e.helper),a=n.offset(),r=n.outerWidth()-e.sizeDiff.width,l=n.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:a.left-h.left-s.left,width:r,height:l}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:a.left-h.left-s.left,width:r,height:l})}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("resizable"),i=e.options,s=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){{var e=t(this).data("resizable");e.options}e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){{var e=t(this).data("resizable");e.options}e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(e){{var i=t(this).data("resizable"),s=i.options,h=i.size,o=i.originalSize,n=i.originalPosition,a=i.axis;s._aspectRatio||e.shiftKey}s.grid="number"==typeof s.grid?[s.grid,s.grid]:s.grid;var r=Math.round((h.width-o.width)/(s.grid[0]||1))*(s.grid[0]||1),l=Math.round((h.height-o.height)/(s.grid[1]||1))*(s.grid[1]||1);/^(se|s|e)$/.test(a)?(i.size.width=o.width+r,i.size.height=o.height+l):/^(ne)$/.test(a)?(i.size.width=o.width+r,i.size.height=o.height+l,i.position.top=n.top-l):/^(sw)$/.test(a)?(i.size.width=o.width+r,i.size.height=o.height+l,i.position.left=n.left-r):(i.size.width=o.width+r,i.size.height=o.height+l,i.position.top=n.top-l,i.position.left=n.left-r)}});var e=function(t){return parseInt(t,10)||0},i=function(t){return!isNaN(parseInt(t,10))}}(jQuery);